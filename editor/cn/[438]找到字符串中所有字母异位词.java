//ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ pï¼Œæ‰¾åˆ° s ä¸­æ‰€æœ‰ p çš„ å¼‚ä½è¯ çš„å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚ä¸è€ƒè™‘ç­”æ¡ˆè¾“å‡ºçš„é¡ºåºã€‚ 
//
// å¼‚ä½è¯ æŒ‡ç”±ç›¸åŒå­—æ¯é‡æ’åˆ—å½¢æˆçš„å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ç›¸åŒçš„å­—ç¬¦ä¸²ï¼‰ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1: 
//
// 
//è¾“å…¥: s = "cbaebabacd", p = "abc"
//è¾“å‡º: [0,6]
//è§£é‡Š:
//èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "cba", å®ƒæ˜¯ "abc" çš„å¼‚ä½è¯ã€‚
//èµ·å§‹ç´¢å¼•ç­‰äº 6 çš„å­ä¸²æ˜¯ "bac", å®ƒæ˜¯ "abc" çš„å¼‚ä½è¯ã€‚
// 
//
// ç¤ºä¾‹ 2: 
//
// 
//è¾“å…¥: s = "abab", p = "ab"
//è¾“å‡º: [0,1,2]
//è§£é‡Š:
//èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "ab", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
//èµ·å§‹ç´¢å¼•ç­‰äº 1 çš„å­ä¸²æ˜¯ "ba", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
//èµ·å§‹ç´¢å¼•ç­‰äº 2 çš„å­ä¸²æ˜¯ "ab", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
// 
//
// 
//
// æç¤º: 
//
// 
// 1 <= s.length, p.length <= 3 * 10â´ 
// s å’Œ p ä»…åŒ…å«å°å†™å­—æ¯ 
// 
// Related Topics å“ˆå¸Œè¡¨ å­—ç¬¦ä¸² æ»‘åŠ¨çª—å£ ğŸ‘ 749 ğŸ‘ 0


import java.util.ArrayList;
import java.util.List;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution_438 {
    /**
     * é™¤äº†ç›´æ¥æ¯”è¾ƒæ•°ç»„æ˜¯å¦ç›¸ç­‰å¤–ï¼Œå…¶å®è¿˜å¯ä»¥ç”¨åŒæŒ‡é’ˆæ¥è¡¨ç¤ºæ»‘åŠ¨çª—å£çš„ä¸¤ä¾§è¾¹ç•Œï¼Œå½“æ»‘åŠ¨çª—å£çš„é•¿åº¦ç­‰äºpçš„é•¿åº¦æ—¶ï¼Œè¡¨ç¤ºæ‰¾åˆ°ä¸€ä¸ªå¼‚ä½è¯ï¼Œä¸¤ç§æ–¹å¼çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(n)çº§åˆ«çš„
     * å…ˆè¯´ç»“è®ºï¼ŒPythonç”¨æ•°ç»„æ›´å¿«ä¸€ç‚¹ç‚¹ï¼ˆå·®ä¸å¤ªå¤šå…¶å®ï¼‰ï¼ŒJavaç”¨åŒæŒ‡é’ˆæ›´å¿«ä¸€ç‚¹ï¼Œä¸‹é¢æ˜¯å…·ä½“æ­¥éª¤ï¼š
     *
     * å®šä¹‰æ»‘åŠ¨çª—å£çš„å·¦å³ä¸¤ä¸ªæŒ‡é’ˆleftï¼Œright
     * rightä¸€æ­¥ä¸€æ­¥å‘å³èµ°éå†så­—ç¬¦ä¸²
     * rightå½“å‰éå†åˆ°çš„å­—ç¬¦åŠ å…¥s_cntåä¸æ»¡è¶³p_cntçš„å­—ç¬¦æ•°é‡è¦æ±‚ï¼Œå°†æ»‘åŠ¨çª—å£å·¦ä¾§å­—ç¬¦ä¸æ–­å¼¹å‡ºï¼Œä¹Ÿå°±æ˜¯leftä¸æ–­å³ç§»ï¼Œç›´åˆ°ç¬¦åˆè¦æ±‚ä¸ºæ­¢ã€‚
     * å½“æ»‘åŠ¨çª—å£çš„é•¿åº¦ç­‰äºpçš„é•¿åº¦æ—¶ï¼Œè¿™æ—¶çš„så­å­—ç¬¦ä¸²å°±æ˜¯pçš„å¼‚ä½è¯ã€‚
     * å…¶ä¸­ï¼Œleftå’Œrightè¡¨ç¤ºæ»‘åŠ¨çª—å£åœ¨å­—ç¬¦ä¸²sä¸­çš„ç´¢å¼•ï¼Œcur_leftå’Œcur_rightè¡¨ç¤ºå­—ç¬¦ä¸²sä¸­ç´¢å¼•ä¸ºleftå’Œrightçš„å­—ç¬¦åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•
     *
     * ä½œè€…ï¼šedelweisskoko
     * é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/find-all-anagrams-in-a-string/solution/438-zhao-dao-zi-fu-chuan-zhong-suo-you-z-nx6b/
     * æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
     * è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
     * @param s
     * @param p
     * @return
     */
    public List<Integer> findAnagrams(String s, String p) {
        List<Integer> res = new ArrayList<>();
        int n = s.length();int m = p.length();
        if (n < m) return res;
        int[] p_cnt = new int[26];
        int[] s_cnt = new int[26];
        for (int i = 0; i < m; i++) {
            p_cnt[p.charAt(i) - 'a']++;
        }
        int left = 0;
        for (int right = 0; right < n; right++) {
            int curRight = s.charAt(right) - 'a';
            s_cnt[curRight]++;
            while (s_cnt[curRight] > p_cnt[curRight]) {
                int curLeft = s.charAt(left) - 'a';
                s_cnt[curLeft]--;
                left++;
            }
            if (right - left +1 == m) {
                res.add(left);
            }

        }
        return res;
    }
}
//leetcode submit region end(Prohibit modification and deletion)
